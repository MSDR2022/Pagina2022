<DOCTYPE html>
    <html lang="en" dir="ltr">

      <head>        
        <meta charset="utf-8">
        <title>GPS Tracker</title>

         <!-- Css de leaflet-->
         <link rel="stylesheet" href="https://unpkg.com/leaflet@1.8.0/dist/leaflet.css" integrity="sha512-hoalWLoI8r4UszCkZ5kL8vayOGVae1oxXe/2A4AO6J9+580uKHDO3JdHb7NzwwzK5xr/Fs0W40kiNHxM9vyTtQ==" crossorigin="" />
         
         <!-- JS de leaflet-->
        <script src="https://unpkg.com/leaflet@1.8.0/dist/leaflet.js" integrity="sha512-BB3hKbKWOc9Ez/TAwyWxNXeoV9c1v6FIeYiBieIWkpLjauysF18NzgR1MBNBXf8/KABdlkX68nAhlwcDFLGPCQ==" crossorigin=""></script>

      </head>

      <body onload = "table();" style="background-color:#28282B;">

        <table border = 1 cellpadding = 10>     <!-- Se genera una tabla (la cual se entregara a index.php) -->
            <tr>                        <!-- Info de las columnas -->
              <td style="color:#FFFFFFFF">Latitud</td>
              <td style="color:#FFFFFFFF">Longitud</td>
              <td style="color:#FFFFFFFF">Fecha</td>
            </tr>
               <!-- Función FOR para crear columnas el valor $row es el nombre de la columna en SQL -->
            <tr>
              <td id="lat" style="color:#FFFFFFFF"></td>
              <td id="lng" style="color:#FFFFFFFF"></td>
              <td id="date" style="color:#FFFFFFFF"></td>
            </tr>
        </table>

        <script type="text/javascript">
          function table(){
            
            const xhttp = new XMLHttpRequest();  //creando el objeto para trabajar
            xhttp.onload = function(){
                var data = this.responseText
                data = JSON.parse(data);
                document.getElementById("lat").innerHTML = data.Latitud
                document.getElementById("lng").innerHTML = data.Longitud
                document.getElementById("date").innerHTML = data.Fecha
                document.body.innerHTML = "<h1> Lat"+ data.Latitud + "</h1>"
            }

            xhttp.open("GET", "datadb.php");  // documento que estamos llamando
            xhttp.send();
          }
          setInterval(function(){   //creamos un intervalo para realizar el mismo request del archivo que genera la conexión con la base de datos
            table();
          }, 2000); // Cada 5 segundos
    
        </script>

        <br>
        
        <div id="map" style="width: 100%; height: 500px;"></div>

        <script src="mapa.js"></script>

      </body>
    </html>